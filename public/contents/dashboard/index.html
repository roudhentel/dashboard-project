<link rel="stylesheet" href="contents/dashboard/style.css" />

<div class="dashboard-page">
    <div class="grid-toolbox" ng-if="gbl.wtoolbxVisible">
        <label>Widget toolbox</label>

        <div class="tool" ng-repeat="tool in listToolbox | filter:displayNotUsed">
            <span>{{tool.name}}</span>
            <span ng-if="dashboard.isEdit"><i class="fa fa-plus-circle" ng-click="addWidget($event, tool);"></i></span>
        </div>

        <div class="command">
            <button class="btn btn-primary" ng-class="dashboard.isEdit ? 'btn-success' : 'btn-primary'" ng-click="editDashboard($event);">{{dashboard.isEdit ? 'Save' : 'Edit'}}</button>
            <button class="btn" ng-click="cancelEdit();">Cancel</button>
        </div>
    </div>
    <div class="db-header">
        <h4 ng-if="!isEdit">{{dashboard.header}}</h4>
        <input type="text" ng-if="isEdit" ng-model="dashboard.header">
    </div>
    <div class="grid-container">
        <div gridster="gridsterOpts" id="grid">
            <ul>
                <li gridster-item="item.position" ng-repeat="item in widgets track by $index ">
                    <div class="part">{{item.name}}</div>
                    <div class="part" ng-class="item.color">{{item.value}}</div>
                    <div class="part">
                        <div class="label">{{item.subtitle}}</div>
                        <div class="arrow" ng-if="item.subtitle"><i class="fa fa-angle-right"></i></div>
                    </div>
                    <div class="command" ng-if="dashboard.isEdit">
                        <i class="fa fa-minus-circle" ng-click="removeWidget($event, item);"></i>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>